<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Neovim</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <navbar class="top-nav">
      <div class="logo">Village Numérique Résistant</div>
      <nav>
        <a href="index.html">Accueil</a>
        <a href="team.html">Équipe</a>
        <a id="show-intro-btn" href="#">Afficher l’intro</a>
      </nav>
    </navbar>
    <div id="intro-overlay">
      <div class="intro-panel">
        <img src="assets/logo.png" alt="Logo Village Numérique Résistant" class="intro-logo">
        <h1>Bienvenue au Village Numérique Résistant</h1>
        <p>
          Incarne Tux le pinguoin de Linux et découvre comment
          lutter contre l’obsolescence programmée, promouvoir
          le logiciel libre et construire un numérique plus
          responsable.
        </p>
        <button id="intro-btn">Accéder au village</button>
      </div>
    </div>
    <div id="game-container"></div>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.js"></script>
    <script src="js/StartScene.js"></script>
    <script src="js/Level1Scene.js"></script>
    <script src="js/main.js"></script>
    <script>
      const btn = document.getElementById('intro-btn');
      const overlay = document.getElementById('intro-overlay');
      const showIntroBtn = document.getElementById('show-intro-btn');

      function showOverlay() {
        overlay.style.display = 'flex';
        setTimeout(() => {
          overlay.style.opacity = '1';
          overlay.style.pointerEvents = 'all';
        }, 10);
      }

      function hideOverlay() {
        overlay.style.opacity = '0';
        overlay.style.pointerEvents = 'none';
        setTimeout(() => {
          overlay.style.display = 'none';
        }, 400);
      }

      document.addEventListener('DOMContentLoaded', () => {
        const hasVisited = localStorage.getItem('hasVisitedVillage');

        if (hasVisited === 'true') {
          overlay.style.display = 'none';
          overlay.style.opacity = '0';
          overlay.style.pointerEvents = 'none';
        } else {
          showOverlay();
        }
      });

      btn.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        localStorage.setItem('hasVisitedVillage', 'true');
        hideOverlay();
      });

      showIntroBtn.addEventListener('click', (e) => {
        e.preventDefault();
        showOverlay();
      });
    </script>
  </body>
</html>
